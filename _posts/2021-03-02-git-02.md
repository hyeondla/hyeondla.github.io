---
layout: single
title:  "Git-02"
---

# 버전 관리


> 초기화

```
$ git init
```

디렉터리 초기화 *initialize*

→ Initialized empty Git repository in … 

버전이 저장되는 저장소인 .git 디렉터리 생성됨

> 작업 트리

파일 수정, 저장 작업 수행 

**tracked** 한 번이라도 커밋을 한 파일은 수정 여부를 계속 추적함

​				수정 후 상태 확인 → **modified:  (파일명)** 표시

**untracked** 한 번도 깃에서 버전 관리를 하지 않아 수정 여부를 추적하지 않음

> 스테이지

버전으로 만들 파일 저장

커밋을 통해 버전이 생성되며 저장소로 저장

.git/index 파일에 내용이 저장됨

> 저장소(리포지트리)

스테이지의 파일을 버전으로 만들어 저장

.git/HEAD 파일에 내용이 저장됨

> 깃 상태

```
$ git status
```

**On branch master** 현재 master 브랜치에 있음

**No commits yet** 아직 커밋한 파일이 없음

**nothing to commit** 현재 커밋할 파일이 없음, unmodified 상태

**Changes not staged for commit** 

파일이 수정되었으나 아직 스테이지에 올라가지 않음, modified 상태

**Changes to be committed** 커밋할 변경 사항이 있음, staged 상태

> 스테이징

```
$ git add (파일명)
$ git add .
```

작업 트리에서 파일 생성, 수정 시 스테이지에 파일 추가

**add .** 현재 저장소에서 수정된 파일을 한꺼번에 스테이징

> 커밋

```
$ git commit -m "(커밋메시지)"
```

변경사항 확인을 위한 메시지 작성

→ 1 file changed, 1 insertion(+)

​    스테이지에 있던 파일이 저장소에 추가됨

깃 상태 확인

→ nothing to commit, working tree clean

> 스테이징 + 커밋

```
$ git commit -am "(커밋메시지)"
$ git commit -a -m "(커밋메시지)"
```

한 번 커밋한 파일은 스테이징과 커밋을 한꺼번에 처리 가능

> 가장 최근의 커밋 메시지 수정

```
$ git commit --amend
```

기본 편집기인 빔이 실행되어 원래 커밋 메시지가 나타남

입력 모드로 바꿔 메시지 수정

ex 모드로 돌아가 저장, 종료

> 버전 확인

```
$ git log
$ git log --stat
$ git log --oneline
```

커밋 해시, 최신 커밋 표시 (HEAD ㅡ> master) , 작성자, 버전 생성 날짜, 커밋 메시지 표시

**--stat** 커밋에 관련된 파일까지 함께 표시

**--oneline** 한 줄에 한 커밋씩 표시

> 변경 사항 확인

```
$ git diff
```

작업 트리에 있는 파일과 스테이지에 있는 파일 비교

스테이지에 있는 파일과 저장소에 있는 최신 커밋 비교

**－ (내용)** 최신 버전과 비교할 때 삭제된 내용

**＋ (내용)** 최신 버전과 비교할 때 추가된 내용

> 버전 관리 제외

빔으로 **.gitignore** 파일 생성

버전 관리하지 않을 파일, 디렉토리 이름, 파일 확장자 입력하여 목록 지정

> 파일 수정 되돌리기

```
$ git checkout -- (파일명)
```

되돌린 내용은 다시 복구 불가

> 스테이징 되돌리기

```
$ git reset HEAD (파일명)
```

파일명 미지정시 스테이지에 있는 모든 파일을 되돌림

> 커밋 되돌리기

```
$ git reset 
```

스테이징도 함께 취소되어 파일이 작업 트리에만 남아 있음

**HEAD^** 최신 커밋을 되돌림

**HEAD~*n*** 최근 *n*개의 커밋을 되돌림

**--soft HEAD^** 최근 커밋을 하기 전 상태로 작업 트리를 되돌림

**--mixed HEAD^** 최근 커밋과 스테이징을 하기 전 상태로 작업 트리를 되돌림, 기본 옵션

**--hard HEAD^** 최근 커밋, 스테이징, 파일 수정을 하기 전 상태로 작업 트리를 되돌림, 복구 불가

> 특정 커밋으로 되돌리기

$ git log 결과 화면에서 되돌릴 커밋의 해시를 선택하여 Copy

```
$ git reset --hard (복사한 커밋 해시)
```

복사한 커밋이 가장 최신 커밋, 이후의 커밋은 삭제됨

> 커밋 삭제하지 않고 되돌리기

$ git log 결과 화면에서 취소할 커밋의 해시를 선택하여 Copy

```
$ git revert (복사한 커밋 해시)
```

기본 편집기인 빔이 실행됨

입력 모드로 바꿔 커밋 메시지 입력 가능

ex 모드로 돌아가 저장, 종료
